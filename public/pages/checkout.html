<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Checkout - Nevoris</title>
    <meta name="description" content="Sicher zur Kasse bei Nevoris">
    
    <!-- Preload Stripe -->
    <link rel="preconnect" href="https://js.stripe.com" crossorigin>
    <link rel="dns-prefetch" href="https://js.stripe.com">
    <link rel="preload" href="https://js.stripe.com/v3/" as="script">
    
    <link rel="icon" href="../images/logo/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/styles/checkout-shopify.css">
</head>
<body class="shopify-checkout">
    <!-- Mobile Header -->
    <header class="shopify-header">
        <div class="shopify-header-content">
            <a href="/" class="shopify-logo">
                <img src="/images/logo/Logo.png" alt="Nevoris">
            </a>
            <button class="cart-summary-toggle" id="cart-summary-toggle">
                <img src="/images/cart/cart.png" alt="Cart" class="cart-icon-img">
            </button>
        </div>
    </header>

    <main class="shopify-main">
        <!-- Mobile Order Summary Dropdown -->
        <div class="mobile-order-summary" id="mobile-order-summary">
            <button class="summary-toggle" id="summary-toggle-btn" aria-expanded="false">
                <div class="toggle-left">
                    <span class="toggle-text">Bestellübersicht</span>
                    <svg class="chevron" width="11" height="7" viewBox="0 0 11 7">
                        <path d="M5.5 5L10 1.5L11 2.5L5.5 7L0 2.5L1 1.5L5.5 5Z" fill="currentColor"/>
                    </svg>
                </div>
                <span class="summary-total" id="mobile-total">€0.00</span>
            </button>
            <div class="summary-content" id="summary-content" style="display: none;">
                <!-- Cart Items -->
                <div class="summary-items" id="mobile-summary-items"></div>
                
                <!-- Discount Code -->
                <div class="summary-discount">
                    <input type="text" placeholder="Rabattcode" id="mobile-discount-input" class="discount-input">
                    <button class="apply-btn" id="mobile-apply-btn">Anwenden</button>
                </div>
                
                <!-- Totals -->
                <div class="summary-totals">
                    <div class="summary-row">
                        <span>Zwischensumme</span>
                        <span id="mobile-subtotal">€0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Versand</span>
                        <span class="shipping-free">KOSTENLOS</span>
                    </div>
                    <div class="summary-row total-row">
                        <span>Gesamt</span>
                        <span class="total-price">
                            <span class="currency">EUR</span>
                            <strong id="mobile-total-price">€0.00</strong>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="shopify-container">
            <!-- Desktop Two Column Layout -->
            <div class="checkout-grid">
                <!-- Main Checkout Form -->
                <div class="checkout-main-content">
                
                <form id="checkout-form" class="shopify-form">
                    

                    <!-- Step 1: Email or Phone -->
                    <section class="checkout-section" id="email-section">
                        <div class="section-header">
                            <h2 class="section-title">Schritt 1/3: E-Mail oder Telefon</h2>
                        </div>
                        <div class="form-field">
                            <input 
                                type="text" 
                                id="email" 
                                name="email" 
                                placeholder="E-Mail oder Handynummer"
                                class="shopify-input"
                            >
                        </div>
                    </section>

                    <!-- Delivery Section -->
                    <section class="checkout-section" id="delivery-section">
                        <h2 class="section-title">Lieferung</h2>
                        
                        <div class="form-field">
                            <label class="field-label">Land/Region</label>
                            <select id="country" name="country" required class="shopify-select">
                                <option value="DE" selected>Deutschland</option>
                                <option value="AT">Österreich</option>
                                <option value="CH">Schweiz</option>
                                <option value="NL">Niederlande</option>
                                <option value="BE">Belgien</option>
                                <option value="FR">Frankreich</option>
                                <option value="IT">Italien</option>
                                <option value="ES">Spanien</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="firstName" 
                                name="firstName" 
                                placeholder="Vorname (optional)"
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="lastName" 
                                name="lastName" 
                                placeholder="Nachname"
                                required
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="address" 
                                name="address" 
                                placeholder="Adresse"
                                required
                                class="shopify-input address-input"
                            >
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M14 14L17.5 17.5M16 9C16 12.866 12.866 16 9 16C5.134 16 2 12.866 2 9C2 5.134 5.134 2 9 2C12.866 2 16 5.134 16 9Z" stroke="#767676" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="apartment" 
                                name="apartment" 
                                placeholder="Wohnung, Etage, usw. (optional)"
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="postalCode" 
                                name="postalCode" 
                                placeholder="Postleitzahl"
                                required
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="city" 
                                name="city" 
                                placeholder="Stadt"
                                required
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field checkbox-field">
                            <label class="checkbox-label">
                                <input type="checkbox" id="saveInfo" name="saveInfo">
                                <span class="checkbox-text">Diese Informationen für das nächste Mal speichern</span>
                            </label>
                        </div>
                    </section>

                    <!-- Shipping Method -->
                    <section class="checkout-section" id="shipping-section">
                        <h2 class="section-title">Versand Methoden</h2>
                        <div class="shipping-method-box">
                            <div class="shipping-info">
                                <span class="shipping-name">Standardversand</span>
                                <span class="shipping-time">2-3 Werktage</span>
                            </div>
                            <span class="shipping-price">KOSTENLOS</span>
                        </div>
                    </section>

                    <!-- Secure Checkout -->
                    <section class="checkout-section payment-section">
                        <h2 class="section-title">Sichere Bezahlung</h2>
                        <p class="secure-text">Alle Transaktionen sind sicher und verschlüsselt. Ihre Bestellung beinhaltet kostenlosen Rückversand und 24/7 Zugang zu unserem preisgekrönten Kundenservice</p>
                        
                        <!-- Stripe Payment Element -->
                        <div id="payment-element" class="payment-element-wrapper">
                            <!-- Stripe will inject payment methods here -->
                        </div>
                        <div id="payment-message" class="payment-message"></div>
                    </section>

                    <!-- Mini Order Summary Before Submit -->
                    <div class="mini-order-summary">
                        <div class="mini-summary-items" id="mini-summary-items">
                            <!-- Cart items will be injected here -->
                        </div>
                        <div class="mini-summary-total">
                            <div class="mini-summary-row">
                                <span>Zwischensumme</span>
                                <span id="mini-subtotal">€0.00</span>
                            </div>
                            <div class="mini-summary-row">
                                <span>Versand</span>
                                <span class="shipping-free">Kostenlos</span>
                            </div>
                            <div class="mini-summary-row mini-total-row">
                                <span><strong>Gesamt</strong></span>
                                <span><strong id="mini-total">€0.00</strong></span>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" id="submit-btn" class="submit-button">
                        Bestellung überprüfen
                    </button>

                    <!-- Footer Links -->
                    <div class="checkout-footer-links">
                        <a href="/pages/refund.html">Rückgaberecht</a>
                        <a href="/pages/privacy.html">Datenschutz</a>
                        <a href="/pages/terms.html">AGB</a>
                        <a href="/pages/impressum.html">Impressum</a>
                        <a href="/pages/contact.html">Kontakt</a>
                        <a href="/pages/cookies.html">Cookies</a>
                    </div>

                </form>
            </div>

            <!-- Order Summary Sidebar (Desktop Only) -->
            <aside class="checkout-sidebar desktop-only">
                <div class="sidebar-sticky">
                    <h2 class="section-title">Bestellübersicht</h2>
                    <div class="desktop-summary-items" id="desktop-summary-items"></div>
                    
                    <div class="desktop-discount">
                        <input type="text" placeholder="Rabattcode" id="desktop-discount-input" class="discount-input">
                        <button type="button" class="apply-btn" id="desktop-apply-btn">Anwenden</button>
                    </div>

                    <div class="desktop-totals">
                        <div class="summary-row">
                            <span>Zwischensumme</span>
                            <span id="desktop-subtotal">€0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Versand</span>
                            <span class="shipping-free">KOSTENLOS</span>
                        </div>
                        <div class="summary-row total-row">
                            <span>Gesamt</span>
                            <span class="total-price">
                                <span class="currency">EUR</span>
                                <strong id="desktop-total">€0.00</strong>
                            </span>
                        </div>
                    </div>
                </div>
            </aside>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="/js/header.js"></script>
    <script src="/js/meta-pixel.js"></script>
    <script src="/js/checkout-express-handler.js"></script>
    <script src="/js/checkout-shopify.js"></script>
</body>
</html>
