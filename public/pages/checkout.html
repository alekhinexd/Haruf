<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Checkout - Dupelify</title>
    <meta name="description" content="Sicher zur Kasse bei Dupelify">
    
    <!-- Preload Stripe -->
    <link rel="preconnect" href="https://js.stripe.com" crossorigin>
    <link rel="dns-prefetch" href="https://js.stripe.com">
    <link rel="preload" href="https://js.stripe.com/v3/" as="script">
    
    <link rel="icon" href="../images/logo/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/styles/checkout-shopify.css">
</head>
<body class="shopify-checkout">
    <!-- Mobile Header -->
    <header class="shopify-header">
        <div class="shopify-header-content">
            <a href="/" class="shopify-logo">
                <img src="/images/logo/Logo.png" alt="Dupelify">
            </a>
            <button class="cart-summary-toggle" id="cart-summary-toggle">
                <svg width="24" height="24" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6l-3-4z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="3" y1="6" x2="17" y2="6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M13 10a3 3 0 0 1-6 0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </header>

    <main class="shopify-main">
        <!-- Mobile Order Summary Dropdown -->
        <div class="mobile-order-summary" id="mobile-order-summary">
            <button class="summary-toggle" id="summary-toggle-btn" aria-expanded="false">
                <div class="toggle-left">
                    <span class="toggle-text">Bestellübersicht</span>
                    <svg class="chevron" width="11" height="7" viewBox="0 0 11 7">
                        <path d="M5.5 5L10 1.5L11 2.5L5.5 7L0 2.5L1 1.5L5.5 5Z" fill="currentColor"/>
                    </svg>
                </div>
                <span class="summary-total" id="mobile-total">€0.00</span>
            </button>
            <div class="summary-content" id="summary-content" style="display: none;">
                <!-- Cart Items -->
                <div class="summary-items" id="mobile-summary-items"></div>
                
                <!-- Discount Code -->
                <div class="summary-discount">
                    <input type="text" placeholder="Rabattcode" id="mobile-discount-input" class="discount-input">
                    <button class="apply-btn" id="mobile-apply-btn">Anwenden</button>
                </div>
                
                <!-- Totals -->
                <div class="summary-totals">
                    <div class="summary-row">
                        <span>Zwischensumme</span>
                        <span id="mobile-subtotal">€0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Versand</span>
                        <span class="shipping-free">KOSTENLOS</span>
                    </div>
                    <div class="summary-row total-row">
                        <span>Gesamt</span>
                        <span class="total-price">
                            <span class="currency">EUR</span>
                            <strong id="mobile-total-price">€0.00</strong>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="shopify-container">
            <!-- Main Checkout Form -->
            <div class="checkout-main-content">
                
                <form id="checkout-form" class="shopify-form">
                    
                    <!-- Custom Express Buttons -->
                    <section class="custom-express-section">
                        <div class="custom-express-buttons">
                            <button type="button" class="express-btn apple-pay-btn" id="apple-pay-btn">
                                <svg width="50" height="20" viewBox="0 0 50 20" fill="white">
                                    <path d="M9.536 3.785c.627-.784 1.043-1.869.929-2.954-.898.04-1.998.627-2.645 1.41-.588.705-1.103 1.83-.968 2.895.997.08 2.014-.509 2.684-1.351zm.823 1.33c-1.488-.08-2.744.843-3.452.843-.708 0-1.804-.804-2.962-.783-1.527.02-2.933.882-3.72 2.253-1.587 2.745-.413 6.817 1.134 9.047.755 1.093 1.666 2.312 2.863 2.272 1.135-.04 1.567-.725 2.943-.725 1.375 0 1.764.725 2.962.705 1.233-.02 2.028-1.113 2.784-2.213.863-1.252 1.214-2.468 1.234-2.528-.027-.02-2.371-.902-2.391-3.581-.02-2.233 1.823-3.305 1.902-3.365-1.036-1.528-2.645-1.706-3.217-1.745-.12-.02-.24-.04-.36-.04zm9.536-2.548c3.313 0 5.627 2.274 5.627 5.549 0 3.295-2.353 5.568-5.706 5.568h-3.687v5.627h-2.587V2.567h6.353zm-3.766 8.81h3.06c2.313 0 3.647-1.234 3.647-3.261 0-2.027-1.334-3.242-3.628-3.242h-3.08v6.503zm10.176 6.662c0-2.076 1.607-3.372 4.47-3.549l3.255-.196v-1.036c0-1.351-.902-2.116-2.45-2.116-1.45 0-2.352.667-2.548 1.724h-2.352c.079-2.155 1.902-3.805 4.94-3.805 2.96 0 4.823 1.548 4.823 3.962v8.283h-2.47v-1.999h-.039c-.686 1.351-2.214 2.214-3.845 2.214-2.43 0-3.784-1.41-3.784-3.482zm7.725-1.056v-1.016l-2.921.177c-1.47.098-2.312.745-2.312 1.783 0 1.056.843 1.724 2.155 1.724 1.704 0 3.078-1.154 3.078-2.668zm5.568 8.144c-.412.02-.882-.02-1.333-.118-2.155-.49-3.06-1.783-3.845-4.372l-3.628-11.79h2.705l2.705 9.932h.04l2.705-9.932h2.626l-3.51 10.93c-.863 2.724-1.724 3.412-3.47 3.51-.02 0 0 0 0 0z"/>
                                </svg>
                                <span>Pay</span>
                            </button>
                            <button type="button" class="express-btn google-pay-btn" id="google-pay-btn">
                                <svg width="42" height="17" viewBox="0 0 42 17" fill="white">
                                    <path d="M19.526 7.727v3.91h-.933V.64h2.463c.604 0 1.122.203 1.558.608.435.404.653.893.653 1.465 0 .572-.218 1.062-.653 1.467-.436.404-.954.607-1.558.607h-1.53zm0-6.154v2.363h1.574c.351 0 .647-.114.886-.341a1.13 1.13 0 00.359-.848c0-.336-.12-.618-.359-.848a1.226 1.226 0 00-.886-.341h-1.574v.015zm6.555 4.068c-.652 0-1.208.217-1.667.653-.459.435-.688.99-.688 1.665s.229 1.23.688 1.665c.459.436 1.015.653 1.667.653.338 0 .66-.073.965-.217.305-.145.545-.337.72-.577l.731.731c-.508.608-1.215.912-2.116.912-.851 0-1.574-.277-2.167-.833-.594-.555-.89-1.26-.89-2.115 0-.855.296-1.56.89-2.115.593-.556 1.316-.833 2.167-.833.901 0 1.608.304 2.116.912l-.731.731c-.175-.24-.415-.432-.72-.577a2.066 2.066 0 00-.965-.217v.001zm5.405-.607c.653 0 1.172.203 1.559.608.386.404.579.965.579 1.682v3.313h-.89V11.51h-.044c-.394.58-1.015.87-1.863.87-.653 0-1.186-.174-1.6-.522-.413-.348-.62-.79-.62-1.325 0-.544.207-.982.62-1.34.414-.357.947-.536 1.6-.536.77 0 1.365.203 1.787.608v-.434c0-.413-.16-.776-.48-1.089a1.653 1.653 0 00-1.163-.467c-.696 0-1.235.304-1.617.913l-.817-.512c.545-.847 1.322-1.27 2.347-1.27h.001zm-1.572 4.43c0 .305.13.557.392.757.261.2.584.3.965.3.522 0 .99-.188 1.399-.565.41-.377.615-.823.615-1.341-.35-.435-.965-.652-1.846-.652-.426 0-.783.109-1.073.326-.29.217-.436.494-.436.826l-.016.35zm5.354-8.46h.89V12h-.89V1.003zm4.917 6.916l2.72-6.35h1.015l-3.694 8.426h-.89l1.365-2.947-2.347-5.48h1.015l1.816 4.351z"/>
                                    <path d="M13.433 7.727c0 .986-.29 1.775-.87 2.369-.58.593-1.322.89-2.225.89-.903 0-1.646-.297-2.226-.89-.58-.594-.87-1.383-.87-2.37 0-.986.29-1.776.87-2.369.58-.594 1.323-.89 2.226-.89.903 0 1.645.296 2.225.89.58.593.87 1.383.87 2.37zm-5.273 0c0 .652.174 1.197.522 1.634.348.437.803.653 1.365.653.562 0 1.017-.218 1.365-.653.348-.435.522-.98.522-1.634s-.174-1.197-.522-1.634c-.348-.437-.803-.653-1.365-.653-.562 0-1.017.218-1.365.653-.348.437-.522.982-.522 1.634zm10.633 2.37c-.652 0-1.208.217-1.667.653-.459.435-.688.99-.688 1.665s.229 1.23.688 1.665c.459.436 1.015.653 1.667.653.652 0 1.208-.217 1.667-.653.46-.435.688-.99.688-1.665s-.229-1.23-.688-1.665c-.46-.436-1.015-.653-1.667-.653zm0 4.068c-.435 0-.803-.145-1.103-.434a1.49 1.49 0 01-.45-1.09c0-.435.15-.802.45-1.09.3-.29.668-.434 1.103-.434.435 0 .803.145 1.103.434.3.288.45.655.45 1.09 0 .435-.15.802-.45 1.09a1.49 1.49 0 01-1.103.434z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="or-divider">
                            <span>ODER</span>
                        </div>
                    </section>
                    
                    <!-- Express Checkout Message (hidden by default) -->
                    <div id="express-message" class="express-checkout-message" style="display: none;">
                        <div class="express-message-content">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="#28a745">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                            <div>
                                <p class="express-message-title">Express Checkout aktiviert</p>
                                <p class="express-message-text">Keine weiteren Informationen erforderlich</p>
                            </div>
                        </div>
                    </div>

                    <!-- Step 1: Email or Phone -->
                    <section class="checkout-section" id="email-section">
                        <div class="section-header">
                            <h2 class="section-title">Schritt 1/3: E-Mail oder Telefon</h2>
                            <a href="#" class="sign-in-link">Anmelden</a>
                        </div>
                        <div class="form-field">
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                placeholder="E-Mail oder Handynummer"
                                class="shopify-input"
                            >
                        </div>
                    </section>

                    <!-- Delivery Section -->
                    <section class="checkout-section" id="delivery-section">
                        <h2 class="section-title">Lieferung</h2>
                        
                        <div class="form-field">
                            <label class="field-label">Land/Region</label>
                            <select id="country" name="country" required class="shopify-select">
                                <option value="DE" selected>Deutschland</option>
                                <option value="AT">Österreich</option>
                                <option value="CH">Schweiz</option>
                                <option value="NL">Niederlande</option>
                                <option value="BE">Belgien</option>
                                <option value="FR">Frankreich</option>
                                <option value="IT">Italien</option>
                                <option value="ES">Spanien</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="firstName" 
                                name="firstName" 
                                placeholder="Vorname (optional)"
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="lastName" 
                                name="lastName" 
                                placeholder="Nachname"
                                required
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="address" 
                                name="address" 
                                placeholder="Adresse"
                                required
                                class="shopify-input address-input"
                            >
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M14 14L17.5 17.5M16 9C16 12.866 12.866 16 9 16C5.134 16 2 12.866 2 9C2 5.134 5.134 2 9 2C12.866 2 16 5.134 16 9Z" stroke="#767676" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="apartment" 
                                name="apartment" 
                                placeholder="Wohnung, Etage, usw. (optional)"
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="postalCode" 
                                name="postalCode" 
                                placeholder="Postleitzahl"
                                required
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field">
                            <input 
                                type="text" 
                                id="city" 
                                name="city" 
                                placeholder="Stadt"
                                required
                                class="shopify-input"
                            >
                        </div>

                        <div class="form-field checkbox-field">
                            <label class="checkbox-label">
                                <input type="checkbox" id="saveInfo" name="saveInfo">
                                <span class="checkbox-text">Diese Informationen für das nächste Mal speichern</span>
                            </label>
                        </div>
                    </section>

                    <!-- Shipping Method -->
                    <section class="checkout-section" id="shipping-section">
                        <h2 class="section-title">Versand Methoden</h2>
                        <div class="shipping-method-box">
                            <div class="shipping-info">
                                <span class="shipping-name">Standardversand</span>
                                <span class="shipping-time">2-3 Werktage</span>
                            </div>
                            <span class="shipping-price">KOSTENLOS</span>
                        </div>
                    </section>

                    <!-- Secure Checkout -->
                    <section class="checkout-section payment-section">
                        <h2 class="section-title">Sichere Bezahlung</h2>
                        <p class="secure-text">Alle Transaktionen sind sicher und verschlüsselt. Ihre Bestellung beinhaltet kostenlosen Rückversand und 24/7 Zugang zu unserem preisgekrönten Kundenservice</p>
                        
                        <!-- Stripe Payment Element -->
                        <div id="payment-element" class="payment-element-wrapper">
                            <!-- Stripe will inject payment methods here -->
                        </div>
                        <div id="payment-message" class="payment-message"></div>
                    </section>

                    <!-- Order Summary (Desktop) -->
                    <section class="checkout-section order-summary-section desktop-only">
                        <h2 class="section-title">Bestellübersicht</h2>
                        <div class="desktop-summary-items" id="desktop-summary-items"></div>
                        
                        <div class="desktop-discount">
                            <input type="text" placeholder="Rabattcode" id="desktop-discount-input" class="discount-input">
                            <button type="button" class="apply-btn" id="desktop-apply-btn">Anwenden</button>
                        </div>

                        <div class="desktop-totals">
                            <div class="summary-row">
                                <span>Zwischensumme</span>
                                <span id="desktop-subtotal">€0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Versand</span>
                                <span class="shipping-free">KOSTENLOS</span>
                            </div>
                            <div class="summary-row total-row">
                                <span>Gesamt</span>
                                <span class="total-price">
                                    <span class="currency">EUR</span>
                                    <strong id="desktop-total">€0.00</strong>
                                </span>
                            </div>
                        </div>
                    </section>

                    <!-- Submit Button -->
                    <button type="submit" id="submit-btn" class="submit-button">
                        Bestellung überprüfen
                    </button>

                    <!-- Footer Links -->
                    <div class="checkout-footer-links">
                        <a href="/pages/refund.html">Rückgaberecht</a>
                        <a href="/pages/privacy.html">Datenschutz</a>
                        <a href="/pages/terms.html">AGB</a>
                        <a href="/pages/impressum.html">Impressum</a>
                        <a href="/pages/contact.html">Kontakt</a>
                        <a href="/pages/cookies.html">Cookies</a>
                    </div>

                </form>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="/js/header.js"></script>
    <script src="/js/meta-pixel.js"></script>
    <script src="/js/checkout-express-handler.js"></script>
    <script src="/js/checkout-shopify.js"></script>
</body>
</html>
